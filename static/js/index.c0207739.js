(()=>{"use strict";var e={370:(e,n,r)=>{e.exports=r.p+"441dbb9a9f8e4e02.wasm"},383:(e,n,r)=>{var t=r(751),a=r(641),i=r(33),o=r(953),s=r(922),l=r(437),u=r(24);const c={class:"settings"},d={class:"setting-row"},m={class:"setting-row"},f={class:"setting-row"},p={class:"setting-row"},g={class:"setting-row"},h={class:"setting-row"},v={class:"setting-row"},b={class:"setting-row"},w={class:"setting-row"},y={class:"setting-row"},k={class:"setting-row"};function L(e,n,r,o,s,l){return(0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("div",d,[n[11]||(n[11]=(0,a.Lk)("label",null,[(0,a.eW)("群れの数"),(0,a.Lk)("br"),(0,a.eW)(" (Flock Size):")],-1)),(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":n[0]||(n[0]=e=>r.settings.flockSize=e),min:"10",max:"10000",step:"1"},null,512),[[t.Jo,r.settings.flockSize,void 0,{number:!0}]]),(0,a.Lk)("span",null,(0,i.v_)(r.settings.flockSize),1)]),(0,a.Lk)("div",m,[n[12]||(n[12]=(0,a.Lk)("label",null,[(0,a.eW)("凝集"),(0,a.Lk)("br"),(0,a.eW)(" (Cohesion):")],-1)),(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":n[1]||(n[1]=e=>r.settings.cohesion=e),min:"0",max:"10",step:"0.01"},null,512),[[t.Jo,r.settings.cohesion,void 0,{number:!0}]]),(0,a.Lk)("span",null,(0,i.v_)(r.settings.cohesion),1)]),(0,a.Lk)("div",f,[n[13]||(n[13]=(0,a.Lk)("label",null,[(0,a.eW)("凝集範囲"),(0,a.Lk)("br"),(0,a.eW)(" (Cohesion Range):")],-1)),(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":n[2]||(n[2]=e=>r.settings.cohesionRange=e),min:"1",max:"300",step:"1"},null,512),[[t.Jo,r.settings.cohesionRange,void 0,{number:!0}]]),(0,a.Lk)("span",null,(0,i.v_)(r.settings.cohesionRange),1)]),(0,a.Lk)("div",p,[n[14]||(n[14]=(0,a.Lk)("label",null,[(0,a.eW)("分離"),(0,a.Lk)("br"),(0,a.eW)(" (Separation):")],-1)),(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":n[3]||(n[3]=e=>r.settings.separation=e),min:"0",max:"10",step:"0.01"},null,512),[[t.Jo,r.settings.separation,void 0,{number:!0}]]),(0,a.Lk)("span",null,(0,i.v_)(r.settings.separation),1)]),(0,a.Lk)("div",g,[n[15]||(n[15]=(0,a.Lk)("label",null,[(0,a.eW)("分離範囲"),(0,a.Lk)("br"),(0,a.eW)(" (Separation Range):")],-1)),(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":n[4]||(n[4]=e=>r.settings.separationRange=e),min:"1",max:"100",step:"1"},null,512),[[t.Jo,r.settings.separationRange,void 0,{number:!0}]]),(0,a.Lk)("span",null,(0,i.v_)(r.settings.separationRange),1)]),(0,a.Lk)("div",h,[n[16]||(n[16]=(0,a.Lk)("label",null,[(0,a.eW)("整列"),(0,a.Lk)("br"),(0,a.eW)(" (Alignment):")],-1)),(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":n[5]||(n[5]=e=>r.settings.alignment=e),min:"0",max:"10",step:"0.01"},null,512),[[t.Jo,r.settings.alignment,void 0,{number:!0}]]),(0,a.Lk)("span",null,(0,i.v_)(r.settings.alignment),1)]),(0,a.Lk)("div",v,[n[17]||(n[17]=(0,a.Lk)("label",null,[(0,a.eW)("整列範囲"),(0,a.Lk)("br"),(0,a.eW)(" (Alignment Range):")],-1)),(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":n[6]||(n[6]=e=>r.settings.alignmentRange=e),min:"1",max:"100",step:"1"},null,512),[[t.Jo,r.settings.alignmentRange,void 0,{number:!0}]]),(0,a.Lk)("span",null,(0,i.v_)(r.settings.alignmentRange),1)]),(0,a.Lk)("div",b,[n[18]||(n[18]=(0,a.Lk)("label",null,[(0,a.eW)("最大速度:"),(0,a.Lk)("br"),(0,a.eW)(" (Max Speed):")],-1)),(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":n[7]||(n[7]=e=>r.settings.maxSpeed=e),min:"0.1",max:"10",step:"0.01"},null,512),[[t.Jo,r.settings.maxSpeed,void 0,{number:!0}]]),(0,a.Lk)("span",null,(0,i.v_)(r.settings.maxSpeed),1)]),(0,a.Lk)("div",w,[n[19]||(n[19]=(0,a.Lk)("label",null,[(0,a.eW)("最大旋回角:"),(0,a.Lk)("br"),(0,a.eW)(" (Max Turn Angle):")],-1)),(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":n[8]||(n[8]=e=>r.settings.maxTurnAngle=e),min:"0.001",max:"1",step:"0.001"},null,512),[[t.Jo,r.settings.maxTurnAngle,void 0,{number:!0}]]),(0,a.Lk)("span",null,(0,i.v_)(r.settings.maxTurnAngle),1)]),(0,a.Lk)("div",y,[n[20]||(n[20]=(0,a.Lk)("label",null,[(0,a.eW)("最大近傍数"),(0,a.Lk)("br"),(0,a.eW)("(Max Neighbors):")],-1)),(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":n[9]||(n[9]=e=>r.settings.maxNeighbors=e),min:"1",max:"32",step:"1"},null,512),[[t.Jo,r.settings.maxNeighbors,void 0,{number:!0}]]),(0,a.Lk)("span",null,(0,i.v_)(r.settings.maxNeighbors),1)]),(0,a.Lk)("div",k,[n[21]||(n[21]=(0,a.Lk)("label",null,[(0,a.eW)("吸引減衰λ"),(0,a.Lk)("br"),(0,a.eW)("(Lambda):")],-1)),(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":n[10]||(n[10]=e=>r.settings.lambda=e),min:"0.001",max:"0.2",step:"0.001"},null,512),[[t.Jo,r.settings.lambda,void 0,{number:!0}]]),(0,a.Lk)("span",null,(0,i.v_)(r.settings.lambda),1)])])}const x={props:{settings:{type:Object,required:!0}}};var A=r(262);const R=(0,A.A)(x,[["render",L],["__scopeId","data-v-e1c3bf5a"]]),S=R,W={id:"app"},T={class:"ui-overlay"},C={style:{"margin-left":"1em"}},F={style:{"margin-left":"1em"}},P={style:{"margin-left":"1em"}},U={class:"info"},z=1e3/60,N={__name:"App",setup(e){const n=(0,a.WQ)("wasmModule");n||console.error("wasmModule not provided");const r=(0,o.Kh)({cohesion:6.8,separation:2,alignment:1,maxSpeed:1,maxTurnAngle:.281,separationRange:6,alignmentRange:30,cohesionRange:171,speed:5,flockSize:2e3,maxNeighbors:7,lambda:.05}),c=(0,o.KR)(null);let d,m,f,p,g=null,h=null;const v=(0,o.KR)(!1),b=(0,o.KR)(!0),w=(0,o.KR)(!1),y=(0,o.KR)(!1),k=(0,o.KR)(1);let L=[],x=[],A=1;function R(e,n=0){if(!e||!e.children||"function"!==typeof e.children.size||0===e.children.size())return n;let r=n;for(let t=0;t<e.children.size();t++){const a=e.children.get(t);r=Math.max(r,R(a,n+1))}return r}function N(e){"Space"===e.code&&(v.value=!v.value)}function V(){const e=window.innerWidth,n=window.innerHeight;d=new s.Z58,d.background=new s.Q1f(663098),d.fog=new s.jUj(663098,300,900),m=new s.ubm(75,e/n,.1,1e3),m.position.set(0,0,150),m.lookAt(0,0,0),f=new l.JeP({antialias:!0}),f.setSize(e,n),f.shadowMap.enabled=!0,c.value.appendChild(f.domElement),p=new u.N(m,f.domElement);const r=new s.bdM(1e3,1e3),t=new s._4j({color:1585232,roughness:.8}),a=new s.eaF(r,t);a.rotation.x=-Math.PI/2,a.position.y=-200,a.receiveShadow=!0,d.add(a);const i=new s.$p8(16777215,1.5);d.add(i);const o=new s.ZyN(16773836,1.3);o.position.set(300,500,200),o.castShadow=!0,o.shadow.camera.left=-500,o.shadow.camera.right=500,o.shadow.camera.top=500,o.shadow.camera.bottom=-500,o.shadow.camera.near=1,o.shadow.camera.far=2e3,o.shadow.mapSize.width=2048,o.shadow.mapSize.height=2048,o.shadow.bias=-.001,o.shadow.normalBias=.01,d.add(o),window.addEventListener("resize",_)}function _(){const e=window.innerWidth,n=window.innerHeight;m.aspect=e/n,m.updateProjectionMatrix(),f.setSize(e,n)}let B=[];const E=new s.Gu$(1,8,8),j=new s.Gu$(1,3,2),I=new s._4j({color:2078207});function M(e){for(const n of B)d.remove(n);B=[];for(let n=0;n<e;n++){const e=new s.UpK,n=new s.eaF(E,I);n.castShadow=!0,n.scale.set(.5,.5,2),e.addLevel(n,0);const r=new s.eaF(j,I);r.castShadow=!0,r.scale.set(.5,.5,2),e.addLevel(r,100),d.add(e),B.push(e)}}function J(e){const n=e.size();B.length!==n&&M(n);for(let r=0;r<n;r++){const n=e.get(r),t=B[r];t.position.set(n.position.x,n.position.y,n.position.z);const a=n.velocity,i=new s.Pq0(a.x,a.y,a.z);i.lengthSq()>1e-4?t.quaternion.setFromUnitVectors(new s.Pq0(0,0,1),i.clone().normalize()):t.quaternion.identity()}}function $(){for(const e of L)d.remove(e);for(const e of x)d.remove(e);L=[],x=[]}function O(e,n=0){if(w.value&&n>=A-k.value+1&&(null==e.children||0===e.children.size()||n===A)){const r=(new s.Q1f).setHSL(.1,1,.7-n/A*.4),t=new s.Gu$(e.radius,16,16),a=new s.V9B({color:r,wireframe:!0,opacity:.3,transparent:!0}),i=new s.eaF(t,a);i.position.set(e.center.x,e.center.y,e.center.z),d.add(i),L.push(i)}if(y.value&&e.children&&"function"===typeof e.children.size&&e.children.size()>0)for(let r=0;r<e.children.size();r++){const t=e.children.get(r),a=[new s.Pq0(e.center.x,e.center.y,e.center.z),new s.Pq0(t.center.x,t.center.y,t.center.z)],i=(new s.Q1f).setHSL(.35,1,.7-n/A*.4),o=(new s.LoY).setFromPoints(a),l=new s.N1A(o,new s.mrM({color:i}));d.add(l),x.push(l)}if(e.children&&"function"===typeof e.children.size&&e.children.size()>0)for(let r=0;r<e.children.size();r++){const t=e.children.get(r);O(t,n+1)}}let H=null;function q(){if(!v.value&&g){g.update(1);const e=g.getBoids();J(e),$(),b.value&&g.root&&(A=R(g.root,0),O(g.root,0))}p.update(),f.render(d,m),H=setTimeout(q,z)}function G(){const e=n.BoidTree;n.VectorBoid,n.Boid;h=n.BoidTree.generateRandomBoids(r.flockSize,100,.25),g=new e,g.build(h,32,0),q()}return(0,a.sV)((()=>{if(V(),n&&n.setGlobalSpeciesParamsFromJS){const e=(0,o.ux)(r);n.setGlobalSpeciesParamsFromJS({cohesion:Number(e.cohesion),separation:Number(e.separation),alignment:Number(e.alignment),maxSpeed:Number(e.maxSpeed),maxTurnAngle:Number(e.maxTurnAngle),separationRange:Number(e.separationRange),alignmentRange:Number(e.alignmentRange),cohesionRange:Number(e.cohesionRange)})}window.addEventListener("keydown",N),G()})),(0,a.wB)((()=>[r.cohesion,r.separation,r.alignment,r.maxSpeed,r.maxTurnAngle,r.separationRange,r.alignmentRange,r.cohesionRange,r.maxNeighbors,r.lambda]),(()=>{if(n&&n.setGlobalSpeciesParamsFromJS){const e=(0,o.ux)(r);if([e.cohesion,e.separation,e.alignment,e.maxSpeed,e.maxTurnAngle,e.separationRange,e.alignmentRange,e.cohesionRange,e.maxNeighbors,e.lambda].some((e=>"undefined"===typeof e)))return void console.error("パラメータがundefinedです",e);n.setGlobalSpeciesParamsFromJS({cohesion:Number(e.cohesion),separation:Number(e.separation),alignment:Number(e.alignment),maxSpeed:Number(e.maxSpeed),maxTurnAngle:Number(e.maxTurnAngle),separationRange:Number(e.separationRange),alignmentRange:Number(e.alignmentRange),cohesionRange:Number(e.cohesionRange),maxNeighbors:Number(e.maxNeighbors),lambda:Number(e.lambda)})}})),(0,a.wB)((()=>r.flockSize),(e=>{g&&g.setFlockSize&&g.setFlockSize(e,100,.25)})),(e,n)=>((0,a.uX)(),(0,a.CE)("div",W,[(0,a.Lk)("div",T,[n[9]||(n[9]=(0,a.Lk)("h1",null,"Boids Simulation",-1)),(0,a.Lk)("details",null,[n[8]||(n[8]=(0,a.Lk)("summary",null,"Settings",-1)),(0,a.bF)(S,{settings:r},null,8,["settings"]),(0,a.Lk)("div",null,[(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=e=>b.value=e)},null,512),[[t.lH,b.value]]),n[4]||(n[4]=(0,a.eW)(" Unit可視化 "))]),(0,a.Lk)("label",C,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=e=>w.value=e)},null,512),[[t.lH,w.value]]),n[5]||(n[5]=(0,a.eW)(" スフィアのみ表示 "))]),(0,a.Lk)("label",F,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=e=>y.value=e)},null,512),[[t.lH,y.value]]),n[6]||(n[6]=(0,a.eW)(" 線のみ表示 "))]),(0,a.Lk)("label",P,[n[7]||(n[7]=(0,a.eW)(" 表示レイヤ下限: ")),(0,a.bo)((0,a.Lk)("input",{type:"range",min:"1",max:"20","onUpdate:modelValue":n[3]||(n[3]=e=>k.value=e)},null,512),[[t.Jo,k.value]]),(0,a.eW)(" "+(0,i.v_)(k.value),1)])])]),(0,a.Lk)("div",U,[(0,a.Lk)("p",null,"Boids Count: "+(0,i.v_)(r.flockSize),1)])]),(0,a.Lk)("div",{ref_key:"threeContainer",ref:c,class:"three-container"},null,512)]))}},V=N,_=V;var B=(()=>async function(e={}){var n,t,a,i,o,s=e,l=new Promise(((e,n)=>{t=e,a=n})),u="object"==typeof window,c="undefined"!=typeof WorkerGlobalScope,d=("object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&process.type,"file:///D:/GitHub/wasm-boids/src/wasm/build/wasm_boids.js"),m="";function f(e){return s["locateFile"]?s["locateFile"](e,m):m+e}if(u||c){try{m=new URL(".",d).href}catch{}c&&(o=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),i=async e=>{var n=await fetch(e,{credentials:"same-origin"});if(n.ok)return n.arrayBuffer();throw new Error(n.status+" : "+n.url)}}console.log.bind(console);var p,g,h,v,b,w,y,k,L,x,A,R,S=console.error.bind(console),W=!1;function T(){var e=g.buffer;h=new Int8Array(e),b=new Int16Array(e),v=new Uint8Array(e),w=new Uint16Array(e),y=new Int32Array(e),k=new Uint32Array(e),L=new Float32Array(e),R=new Float64Array(e),x=new BigInt64Array(e),A=new BigUint64Array(e)}function C(){if(s["preRun"]){"function"==typeof s["preRun"]&&(s["preRun"]=[s["preRun"]]);while(s["preRun"].length)Q(s["preRun"].shift())}q(K)}function F(){en["m"]()}function P(){if(s["postRun"]){"function"==typeof s["postRun"]&&(s["postRun"]=[s["postRun"]]);while(s["postRun"].length)D(s["postRun"].shift())}q(G)}var U,z=0,N=null;function V(e){z++,s["monitorRunDependencies"]?.(z)}function _(e){if(z--,s["monitorRunDependencies"]?.(z),0==z&&N){var n=N;N=null,n()}}function B(e){s["onAbort"]?.(e),e="Aborted("+e+")",S(e),W=!0,e+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(e);throw a(n),n}function E(){return s["locateFile"]?f("wasm_boids.wasm"):new URL(r(370),r.b).href}function j(e){if(e==U&&p)return new Uint8Array(p);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}async function I(e){if(!p)try{var n=await i(e);return new Uint8Array(n)}catch{}return j(e)}async function M(e,n){try{var r=await I(e),t=await WebAssembly.instantiate(r,n);return t}catch(a){S(`failed to asynchronously prepare wasm: ${a}`),B(a)}}async function J(e,n,r){if(!e&&"function"==typeof WebAssembly.instantiateStreaming)try{var t=fetch(n,{credentials:"same-origin"}),a=await WebAssembly.instantiateStreaming(t,r);return a}catch(i){S(`wasm streaming compile failed: ${i}`),S("falling back to ArrayBuffer instantiation")}return M(n,r)}function $(){return{a:Ze}}async function O(){function e(e,n){return en=e.exports,g=en["l"],T(),_("wasm-instantiate"),en}function n(n){return e(n["instance"])}V("wasm-instantiate");var r=$();if(s["instantiateWasm"])return new Promise(((n,t)=>{s["instantiateWasm"](r,((r,t)=>{n(e(r,t))}))}));U??=E();try{var t=await J(p,U,r),i=n(t);return i}catch(o){return a(o),Promise.reject(o)}}var H,q=e=>{while(e.length>0)e.shift()(s)},G=[],D=e=>G.push(e),K=[],Q=e=>K.push(e),X=e=>tn(e),Y=()=>on(),Z=()=>B(""),ee=e=>{if(null===e)return"null";var n=typeof e;return"object"===n||"array"===n||"function"===n?e.toString():""+e},ne=()=>{for(var e=new Array(256),n=0;n<256;++n)e[n]=String.fromCharCode(n);H=e},re=e=>{var n="",r=e;while(v[r])n+=H[v[r++]];return n},te={},ae={},ie={},oe=s["BindingError"]=class extends Error{constructor(e){super(e),this.name="BindingError"}},se=e=>{throw new oe(e)};function le(e,n,r={}){var t=n.name;if(e||se(`type "${t}" must have a positive integer typeid pointer`),ae.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;se(`Cannot register type '${t}' twice`)}if(ae[e]=n,delete ie[e],te.hasOwnProperty(e)){var a=te[e];delete te[e],a.forEach((e=>e()))}}function ue(e,n,r={}){return le(e,n,r)}var ce=(e,n,r)=>{switch(n){case 1:return r?e=>h[e]:e=>v[e];case 2:return r?e=>b[e>>1]:e=>w[e>>1];case 4:return r?e=>y[e>>2]:e=>k[e>>2];case 8:return r?e=>x[e>>3]:e=>A[e>>3];default:throw new TypeError(`invalid integer width (${n}): ${e}`)}},de=(e,n,r,t,a)=>{n=re(n);var i=-1!=n.indexOf("u");ue(e,{name:n,fromWireType:e=>e,toWireType:function(e,n){if("bigint"!=typeof n&&"number"!=typeof n)throw new TypeError(`Cannot convert "${ee(n)}" to ${this.name}`);return"number"==typeof n&&(n=BigInt(n)),n},argPackAdvance:me,readValueFromPointer:ce(n,r,!i),destructorFunction:null})},me=8,fe=(e,n,r,t)=>{n=re(n),ue(e,{name:n,fromWireType:function(e){return!!e},toWireType:function(e,n){return n?r:t},argPackAdvance:me,readValueFromPointer:function(e){return this["fromWireType"](v[e])},destructorFunction:null})},pe=[],ge=[],he=e=>{e>9&&0===--ge[e+1]&&(ge[e]=void 0,pe.push(e))},ve=()=>ge.length/2-5-pe.length,be=()=>{ge.push(0,1,void 0,1,null,1,!0,1,!1,1),s["count_emval_handles"]=ve},we={toValue:e=>(e||se(`Cannot use deleted val. handle = ${e}`),ge[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const n=pe.pop()||ge.length;return ge[n]=e,ge[n+1]=1,n}}}};function ye(e){return this["fromWireType"](k[e>>2])}var ke={name:"emscripten::val",fromWireType:e=>{var n=we.toValue(e);return he(e),n},toWireType:(e,n)=>we.toHandle(n),argPackAdvance:me,readValueFromPointer:ye,destructorFunction:null},Le=e=>ue(e,ke),xe=(e,n)=>{switch(n){case 4:return function(e){return this["fromWireType"](L[e>>2])};case 8:return function(e){return this["fromWireType"](R[e>>3])};default:throw new TypeError(`invalid float width (${n}): ${e}`)}},Ae=(e,n,r)=>{n=re(n),ue(e,{name:n,fromWireType:e=>e,toWireType:(e,n)=>n,argPackAdvance:me,readValueFromPointer:xe(n,r),destructorFunction:null})},Re=(e,n,r,t,a)=>{n=re(n),-1===a&&(a=4294967295);var i=e=>e;if(0===t){var o=32-8*r;i=e=>e<<o>>>o}var s,l=n.includes("unsigned"),u=(e,n)=>{};s=l?function(e,n){return u(n,this.name),n>>>0}:function(e,n){return u(n,this.name),n},ue(e,{name:n,fromWireType:i,toWireType:s,argPackAdvance:me,readValueFromPointer:ce(n,r,0!==t),destructorFunction:null})},Se=(e,n,r)=>{var t=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],a=t[n];function i(e){var n=k[e>>2],r=k[e+4>>2];return new a(h.buffer,r,n)}r=re(r),ue(e,{name:r,fromWireType:i,argPackAdvance:me,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},We=(e,n,r,t)=>{if(!(t>0))return 0;for(var a=r,i=r+t-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343){var l=e.charCodeAt(++o);s=65536+((1023&s)<<10)|1023&l}if(s<=127){if(r>=i)break;n[r++]=s}else if(s<=2047){if(r+1>=i)break;n[r++]=192|s>>6,n[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;n[r++]=224|s>>12,n[r++]=128|s>>6&63,n[r++]=128|63&s}else{if(r+3>=i)break;n[r++]=240|s>>18,n[r++]=128|s>>12&63,n[r++]=128|s>>6&63,n[r++]=128|63&s}}return n[r]=0,r-a},Te=(e,n,r)=>We(e,v,n,r),Ce=e=>{for(var n=0,r=0;r<e.length;++r){var t=e.charCodeAt(r);t<=127?n++:t<=2047?n+=2:t>=55296&&t<=57343?(n+=4,++r):n+=3}return n},Fe="undefined"!=typeof TextDecoder?new TextDecoder:void 0,Pe=(e,n=0,r=NaN)=>{var t=n+r,a=n;while(e[a]&&!(a>=t))++a;if(a-n>16&&e.buffer&&Fe)return Fe.decode(e.subarray(n,a));var i="";while(n<a){var o=e[n++];if(128&o){var s=63&e[n++];if(192!=(224&o)){var l=63&e[n++];if(o=224==(240&o)?(15&o)<<12|s<<6|l:(7&o)<<18|s<<12|l<<6|63&e[n++],o<65536)i+=String.fromCharCode(o);else{var u=o-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i},Ue=(e,n)=>e?Pe(v,e,n):"",ze=(e,n)=>{n=re(n);var r=!0;ue(e,{name:n,fromWireType(e){var n,t=k[e>>2],a=e+4;if(r)for(var i=a,o=0;o<=t;++o){var s=a+o;if(o==t||0==v[s]){var l=s-i,u=Ue(i,l);void 0===n?n=u:(n+=String.fromCharCode(0),n+=u),i=s+1}}else{var c=new Array(t);for(o=0;o<t;++o)c[o]=String.fromCharCode(v[a+o]);n=c.join("")}return rn(e),n},toWireType(e,n){var t;n instanceof ArrayBuffer&&(n=new Uint8Array(n));var a="string"==typeof n;a||ArrayBuffer.isView(n)&&1==n.BYTES_PER_ELEMENT||se("Cannot pass non-string to std::string"),t=r&&a?Ce(n):n.length;var i=nn(4+t+1),o=i+4;if(k[i>>2]=t,a)if(r)Te(n,o,t+1);else for(var s=0;s<t;++s){var l=n.charCodeAt(s);l>255&&(rn(i),se("String has UTF-16 code units that do not fit in 8 bits")),v[o+s]=l}else v.set(n,o);return null!==e&&e.push(rn,i),i},argPackAdvance:me,readValueFromPointer:ye,destructorFunction(e){rn(e)}})},Ne="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,Ve=(e,n)=>{var r=e,t=r>>1,a=t+n/2;while(!(t>=a)&&w[t])++t;if(r=t<<1,r-e>32&&Ne)return Ne.decode(v.subarray(e,r));for(var i="",o=0;!(o>=n/2);++o){var s=b[e+2*o>>1];if(0==s)break;i+=String.fromCharCode(s)}return i},_e=(e,n,r)=>{if(r??=2147483647,r<2)return 0;r-=2;for(var t=n,a=r<2*e.length?r/2:e.length,i=0;i<a;++i){var o=e.charCodeAt(i);b[n>>1]=o,n+=2}return b[n>>1]=0,n-t},Be=e=>2*e.length,Ee=(e,n)=>{var r=0,t="";while(!(r>=n/4)){var a=y[e+4*r>>2];if(0==a)break;if(++r,a>=65536){var i=a-65536;t+=String.fromCharCode(55296|i>>10,56320|1023&i)}else t+=String.fromCharCode(a)}return t},je=(e,n,r)=>{if(r??=2147483647,r<4)return 0;for(var t=n,a=t+r-4,i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o>=55296&&o<=57343){var s=e.charCodeAt(++i);o=65536+((1023&o)<<10)|1023&s}if(y[n>>2]=o,n+=4,n+4>a)break}return y[n>>2]=0,n-t},Ie=e=>{for(var n=0,r=0;r<e.length;++r){var t=e.charCodeAt(r);t>=55296&&t<=57343&&++r,n+=4}return n},Me=(e,n,r)=>{var t,a,i,o;r=re(r),2===n?(t=Ve,a=_e,o=Be,i=e=>w[e>>1]):4===n&&(t=Ee,a=je,o=Ie,i=e=>k[e>>2]),ue(e,{name:r,fromWireType:e=>{for(var r,a=k[e>>2],o=e+4,s=0;s<=a;++s){var l=e+4+s*n;if(s==a||0==i(l)){var u=l-o,c=t(o,u);void 0===r?r=c:(r+=String.fromCharCode(0),r+=c),o=l+n}}return rn(e),r},toWireType:(e,t)=>{"string"!=typeof t&&se(`Cannot pass non-string to C++ string type ${r}`);var i=o(t),s=nn(4+i+n);return k[s>>2]=i/n,a(t,s+4,i+n),null!==e&&e.push(rn,s),s},argPackAdvance:me,readValueFromPointer:ye,destructorFunction(e){rn(e)}})},Je=(e,n)=>{n=re(n),ue(e,{isVoid:!0,name:n,argPackAdvance:0,fromWireType:()=>{},toWireType:(e,n)=>{}})},$e=()=>2147483648,Oe=(e,n)=>Math.ceil(e/n)*n,He=e=>{var n=g.buffer,r=(e-n.byteLength+65535)/65536|0;try{return g.grow(r),T(),1}catch(t){}},qe=e=>{var n=v.length;e>>>=0;var r=$e();if(e>r)return!1;for(var t=1;t<=4;t*=2){var a=n*(1+.2/t);a=Math.min(a,e+100663296);var i=Math.min(r,Oe(Math.max(e,a),65536)),o=He(i);if(o)return!0}return!1},Ge=e=>{var n=s["_"+e];return n},De=(e,n)=>{h.set(e,n)},Ke=e=>an(e),Qe=e=>{var n=Ce(e)+1,r=Ke(n);return Te(e,r,n),r},Xe=(e,n,r,t,a)=>{var i={string:e=>{var n=0;return null!==e&&void 0!==e&&0!==e&&(n=Qe(e)),n},array:e=>{var n=Ke(e.length);return De(e,n),n}};function o(e){return"string"===n?Ue(e):"boolean"===n?Boolean(e):e}var s=Ge(e),l=[],u=0;if(t)for(var c=0;c<t.length;c++){var d=i[r[c]];d?(0===u&&(u=Y()),l[c]=d(t[c])):l[c]=t[c]}var m=s(...l);function f(e){return 0!==u&&X(u),o(e)}return m=f(m),m},Ye=(e,n,r,t)=>{var a=!r||r.every((e=>"number"===e||"boolean"===e)),i="string"!==n;return i&&a&&!t?Ge(e):(...a)=>Xe(e,n,r,a,t)};ne(),be(),s["noExitRuntime"]&&s["noExitRuntime"],s["print"]&&s["print"],s["printErr"]&&(S=s["printErr"]),s["wasmBinary"]&&(p=s["wasmBinary"]),s["arguments"]&&s["arguments"],s["thisProgram"]&&s["thisProgram"],s["ccall"]=Xe,s["cwrap"]=Ye;var Ze={j:Z,e:de,h:fe,f:Le,d:Ae,b:Re,a:Se,g:ze,c:Me,i:Je,k:qe},en=await O(),nn=(en["m"],s["_malloc"]=en["n"]),rn=s["_free"]=en["o"],tn=en["p"],an=en["q"],on=en["r"];function sn(){function e(){s["calledRun"]=!0,W||(F(),t(s),s["onRuntimeInitialized"]?.(),P())}z>0?N=sn:(C(),z>0?N=sn:s["setStatus"]?(s["setStatus"]("Running..."),setTimeout((()=>{setTimeout((()=>s["setStatus"]("")),1),e()}),1)):e())}function ln(){if(s["preInit"]){"function"==typeof s["preInit"]&&(s["preInit"]=[s["preInit"]]);while(s["preInit"].length>0)s["preInit"].shift()()}}return ln(),sn(),n=l,n})();const E=B;var j=r(370);let I=null;E({locateFile:e=>e.endsWith(".wasm")?j:`/static/js/${e}`}).then((e=>{I=e,console.log("Wasm module initialized:",e);const n=(0,t.Ef)(_);n.provide("wasmModule",e),n.mount("#app")}))}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,r),i.exports}r.m=e,(()=>{var e=[];r.O=(n,t,a,i)=>{if(!t){var o=1/0;for(c=0;c<e.length;c++){for(var[t,a,i]=e[c],s=!0,l=0;l<t.length;l++)(!1&i||o>=i)&&Object.keys(r.O).every((e=>r.O[e](t[l])))?t.splice(l--,1):(s=!1,i<o&&(o=i));if(s){e.splice(c--,1);var u=a();void 0!==u&&(n=u)}}return n}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[t,a,i]}})(),(()=>{r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)})(),(()=>{r.p="/wasm-boids/"})(),(()=>{r.b=document.baseURI||self.location.href;var e={57:0};r.O.j=n=>0===e[n];var n=(n,t)=>{var a,i,[o,s,l]=t,u=0;if(o.some((n=>0!==e[n]))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(l)var c=l(r)}for(n&&n(t);u<o.length;u++)i=o[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(c)},t=self["webpackChunkwasm_boids"]=self["webpackChunkwasm_boids"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var t=r.O(void 0,[504],(()=>r(383)));t=r.O(t)})();
//# sourceMappingURL=index.c0207739.js.map